(()=>{var t={551:function(t){!function(e){let n=[];const r=Array.prototype.forEach;function o(t){const e=[];let n=0;const r=t.length;for(;n<r;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){const r=t.charCodeAt(n++);56320==(64512&r)?e.push(((1023&o)<<10)+(1023&r)+65536):(e.push(o),n--)}else e.push(o)}return e}function i(t,e){const n=Object.prototype.toString.call(t),r="string"==typeof t||"[object NodeList]"===n||"[object HTMLCollection]"===n||1===t.nodeType,o="function"==typeof e;return r||console.error("Countable: Not a valid target"),o||console.error("Countable: Not a valid callback function"),r&&o}function a(t,e){let n=""+("string"==typeof t?t:"value"in t?t.value:t.textContent);(e=e||{}).stripTags&&(n=n.replace(/<\/?[a-z][^>]*>/gi,"")),e.ignore&&r.call(e.ignore,(function(t){n=n.replace(t,"")}));const i=n.trim();return{paragraphs:i?(i.match(e.hardReturns?/\n{2,}/g:/\n+/g)||[]).length+1:0,sentences:i?(i.match(/[.?!…]+./g)||[]).length+1:0,words:i?(i.replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length:0,characters:i?o(i.replace(/\s/g,"")).length:0,all:o(n).length}}const l={on:function(t,e,o){if(i(t,e))return Array.isArray(t)||(t=[t]),r.call(t,(function(t){const r=function(){e.call(t,a(t,o))};n.push({element:t,handler:r}),r(),t.addEventListener("input",r)})),this},off:function(t){if(i(t,(function(){})))return Array.isArray(t)||(t=[t]),n.filter((function(e){return-1!==t.indexOf(e.element)})).forEach((function(t){t.element.removeEventListener("input",t.handler)})),n=n.filter((function(e){return-1===t.indexOf(e.element)})),this},count:function(t,e,n){if(i(t,e))return Array.isArray(t)||(t=[t]),r.call(t,(function(t){e.call(t,a(t,n))})),this},enabled:function(t){return void 0===t.length&&(t=[t]),n.filter((function(e){return-1!==t.indexOf(e.element)})).length===t.length}};t.exports=l}()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t,e=n(551),r=n.n(e),o=null,i=[];function a(){var t=window.location.href;return t.endsWith("/post-new.php")||t.includes("action=edit")?document.querySelector(".wp-block-post-content"):document.querySelector("#vnx_post_content")}(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href=chrome.runtime.getURL("css/highlight.css"),document.head.appendChild(t),chrome.runtime.onMessage.addListener((function(t,e,n){try{if("getContentOverview"===t.action||"getContentOverviewFromCreate"===t.action||"getContentOverviewFromEdit"===t.action)n(function(){console.log("Fetching content overview...");var t=document.querySelector(".edit-post-visual-editor__post-title-wrapper"),e=t?t.innerText:document.querySelector("title")?document.querySelector("title").innerText:"",n=e.length,o=document.querySelector('meta[name="description"]')?document.querySelector('meta[name="description"]').getAttribute("content"):"",i=o.length,l=document.querySelector('meta[property="og:image"]')?document.querySelector('meta[property="og:image"]').getAttribute("content"):"",c=document.querySelector('img[src="'.concat(l,'"]'))?document.querySelector('img[src="'.concat(l,'"]')).alt:"",s=a();if(!s)return console.error("Content area not found."),{};var u=window.location.href,h=0;if(u.endsWith("/post-new.php")||u.includes("action=edit")){var f=s.querySelector("#rank-math-faq"),m=0;if(f){var d=Array.from(f.getElementsByClassName("rank-math-faq-question")),g=Array.from(f.getElementsByClassName("rank-math-faq-answer")),p=[].concat(d,g).map((function(t){return t.innerText})).join(" ");r().count(p,(function(t){m=t.words}))}var y=Array.from(s.children).filter((function(t){return!t.contains(f)})).map((function(t){return t.innerText})).join(" "),v=0;r().count(y,(function(t){v=t.words})),h=m+v}else{var w=s.querySelector("#rank-math-faq"),A=0;if(w){var x=Array.from(w.getElementsByClassName("ftwp-heading")),b=Array.from(w.getElementsByClassName("rank-math-answer")),C=[].concat(x,b).map((function(t){return t.innerText})).join(" ");r().count(C,(function(t){A=t.words}));var q=s.innerText.replace(w.innerText,""),S=0;r().count(q,(function(t){S=t.words})),h=A+S}else r().count(s.innerText,(function(t){h=t.words}))}if(u.endsWith("/post-new.php")||u.includes("action=edit")){var T=document.getElementById("word-count");T&&(T.textContent="".concat(h," words"))}return{metaTitle:e,metaDescription:o,metaTitleCount:n,metaDescriptionCount:i,thumbnail:l,thumbnailAlt:c,wordCount:"".concat(h," words")}}());else if("getImagesAndLinks"===t.action){var l=function(){console.log("Fetching images and links...");var t=a();if(!t)return console.error("Content area not found."),{images:[],links:[]};var e=1,n=1,r={},o=0,l=0,c=0,s=0,u=0,h=0,f=Array.from(t.querySelectorAll("img")).filter((function(t){return"svg"!==t.src.split(".").pop().toLowerCase()})).map((function(t){var n=t.closest("figure"),i=n?n.querySelector("figcaption"):null,a=t.getAttribute("data-src")||t.src||"",f=a.substring(a.lastIndexOf("/")+1),m=a.split(".").pop();return m&&(r[m]=(r[m]||0)+1),t.alt?o++:l++,t.title?c++:s++,i?u++:h++,{id:e++,alt_text:t.alt||"",url:a,name:f,format:m,caption:i?i.textContent:""}})),m=Array.from(t.querySelectorAll("a")).map((function(e){var r=Array.from(t.querySelectorAll("a")).filter((function(t){return t.href===e.href})).length>1;return r&&i.push(e),{link_id:n++,anchor:e.textContent||"",url:e.href||"",is_external:e.hostname!==location.hostname,is_nofollow:e.rel.includes("nofollow"),is_new_tab:"_blank"===e.target,is_duplicated:r}})),d=m.length,g=m.length-new Set(m.map((function(t){return t.url}))).size,p=m.filter((function(t){return t.is_new_tab})).length,y=m.filter((function(t){return!t.is_external})).length,v=m.filter((function(t){return t.is_external})).length,w=m.filter((function(t){return t.is_nofollow})).length;return{images:f,links:m,overview:{totalImages:f.length,imageFormatsCount:r,totalImagesWithAlt:o,totalImagesWithoutAlt:l,totalImagesWithTitle:c,totalImagesWithoutTitle:s,totalImagesWithCaption:u,totalImagesWithoutCaption:h,totalUrls:d,totalDuplicatedUrls:g,totalNewTabUrls:p,totalInternalLinks:y,totalExternalLinks:v,totalNoFollowUrls:w}}}();n(l)}else"highlightAnchor"===t.action?(function(t){o&&(o.classList.remove("highlighted"),o=null);var e=a();e?e.querySelectorAll("a, span, div, p, h1, h2, h3, h4, h5, h6").forEach((function(e){e.textContent.trim()===t.trim()&&(e.classList.add("highlighted"),setTimeout((function(){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),o=e)})):console.error("Content area not found.")}(t.anchorText),n({status:"done"})):"scrollToAnchor"===t.action?(s=t.anchorText,document.querySelectorAll("a, span, div, p, h1, h2, h3, h4, h5, h6").forEach((function(t){t.textContent.trim()===s.trim()&&setTimeout((function(){t.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),n({status:"done"})):"scrollToImage"===t.action?(c=t.imageUrl,document.querySelectorAll("img").forEach((function(t){t.src!==c&&t.getAttribute("data-src")!==c||setTimeout((function(){t.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),n({status:"done"})):"highlightAllDuplicates"===t.action?(i.forEach((function(t){t.classList.add("highlighted")})),i.length>0&&setTimeout((function(){i[0].scrollIntoView({behavior:"smooth",block:"center"})}),100),n({status:"done"})):"resetHighlights"===t.action?(document.querySelectorAll(".highlighted").forEach((function(t){t.classList.remove("highlighted")})),o=null,i.length=0,n({status:"done"})):n({error:"Unknown action"})}catch(t){console.error("Error handling request:",t),n({error:t.message})}var c,s;return!0}))})()})();