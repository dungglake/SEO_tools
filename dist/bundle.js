(()=>{var t={551:function(t){!function(e){let n=[];const o=Array.prototype.forEach;function r(t){const e=[];let n=0;const o=t.length;for(;n<o;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<o){const o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e}function l(t,e){const n=Object.prototype.toString.call(t),o="string"==typeof t||"[object NodeList]"===n||"[object HTMLCollection]"===n||1===t.nodeType,r="function"==typeof e;return o||console.error("Countable: Not a valid target"),r||console.error("Countable: Not a valid callback function"),o&&r}function i(t,e){let n=""+("string"==typeof t?t:"value"in t?t.value:t.textContent);(e=e||{}).stripTags&&(n=n.replace(/<\/?[a-z][^>]*>/gi,"")),e.ignore&&o.call(e.ignore,(function(t){n=n.replace(t,"")}));const l=n.trim();return{paragraphs:l?(l.match(e.hardReturns?/\n{2,}/g:/\n+/g)||[]).length+1:0,sentences:l?(l.match(/[.?!…]+./g)||[]).length+1:0,words:l?(l.replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length:0,characters:l?r(l.replace(/\s/g,"")).length:0,all:r(n).length}}const c={on:function(t,e,r){if(l(t,e))return Array.isArray(t)||(t=[t]),o.call(t,(function(t){const o=function(){e.call(t,i(t,r))};n.push({element:t,handler:o}),o(),t.addEventListener("input",o)})),this},off:function(t){if(l(t,(function(){})))return Array.isArray(t)||(t=[t]),n.filter((function(e){return-1!==t.indexOf(e.element)})).forEach((function(t){t.element.removeEventListener("input",t.handler)})),n=n.filter((function(e){return-1===t.indexOf(e.element)})),this},count:function(t,e,n){if(l(t,e))return Array.isArray(t)||(t=[t]),o.call(t,(function(t){e.call(t,i(t,n))})),this},enabled:function(t){return void 0===t.length&&(t=[t]),n.filter((function(e){return-1!==t.indexOf(e.element)})).length===t.length}};t.exports=c}()}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var l=e[o]={exports:{}};return t[o].call(l.exports,l,l.exports,n),l.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t,e=n(551),o=n.n(e),r=null,l=[];function i(){var t=window.location.href;if(t.endsWith("/post-new.php")||t.includes("action=edit")){var e=document.querySelector(".wp-block-post-content");return console.log("Content area for edit mode:",e),e}var n=document.querySelector("#vnx_post_content");return console.log("Content area for view mode:",n),n}(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href=chrome.runtime.getURL("css/highlight.css"),document.head.appendChild(t),chrome.runtime.onMessage.addListener((function(t,e,n){console.log("Received request:",t);try{if("getContentOverview"===t.action||"getContentOverviewFromCreate"===t.action||"getContentOverviewFromEdit"===t.action)n(function(){console.log("Fetching content overview...");var t=document.querySelector(".edit-post-visual-editor__post-title-wrapper"),e=t?t.innerText:document.querySelector("title")?document.querySelector("title").innerText:"",n=document.querySelector('meta[name="description"]')?document.querySelector('meta[name="description"]').getAttribute("content"):"",r=document.querySelector('meta[property="og:image"]')?document.querySelector('meta[property="og:image"]').getAttribute("content"):"",l=document.querySelector('img[src="'.concat(r,'"]'))?document.querySelector('img[src="'.concat(r,'"]')).alt:"",c=i();if(!c)return console.error("Content area not found."),{};var a=window.location.href,s=0;if(a.endsWith("/post-new.php")||a.includes("action=edit")){var u=c.querySelector("#rank-math-faq"),h=0;if(u){var g=Array.from(u.getElementsByClassName("rank-math-faq-question")),f=Array.from(u.getElementsByClassName("rank-math-faq-answer")),d=[].concat(g,f).map((function(t){return t.innerText})).join(" ");o().count(d,(function(t){h=t.words}))}var m=Array.from(c.children).filter((function(t){return!t.contains(u)})).map((function(t){return t.innerText})).join(" "),p=0;o().count(m,(function(t){p=t.words})),console.log("Other content word count (edit mode):",p),console.log("FAQ word count (edit mode):",h),s=h+p}else{var v=c.querySelector("#rank-math-faq"),y=0;if(v){var w=Array.from(v.getElementsByClassName("ftwp-heading")),A=Array.from(v.getElementsByClassName("rank-math-answer")),x=[].concat(w,A).map((function(t){return t.innerText})).join(" ");o().count(x,(function(t){y=t.words}));var C=c.innerText.replace(v.innerText,""),b=0;o().count(C,(function(t){b=t.words})),console.log("Other content word count (view mode):",b),console.log("FAQ word count (view mode):",y),s=y+b}else o().count(c.innerText,(function(t){s=t.words}))}if(console.log("Total word count:",s),a.endsWith("/post-new.php")||a.includes("action=edit")){var q=document.getElementById("word-count");q&&(q.textContent="".concat(s," words"))}return console.log("Counted words:",s),{metaTitle:e,metaDescription:n,thumbnail:r,thumbnailAlt:l,wordCount:"".concat(s," words")}}());else if("getImagesAndLinks"===t.action){var c=function(){console.log("Fetching images and links...");var t=i();if(!t)return console.error("Content area not found."),{images:[],links:[]};var e=1,n=1,o={},r=0,c=0,a=0,s=0,u=0,h=0,g=Array.from(t.querySelectorAll("img")).filter((function(t){return"svg"!==t.src.split(".").pop().toLowerCase()})).map((function(t){var n=t.closest("figure"),l=n?n.querySelector("figcaption"):null,i=t.getAttribute("data-src")||t.src||"",g=i.substring(i.lastIndexOf("/")+1),f=i.split(".").pop();return f&&(o[f]=(o[f]||0)+1),t.alt?r++:c++,t.title?a++:s++,l?u++:h++,{id:e++,alt_text:t.alt||"",url:i,name:g,format:f,caption:l?l.textContent:""}})),f=Array.from(t.querySelectorAll("a")).map((function(e){var o=Array.from(t.querySelectorAll("a")).filter((function(t){return t.href===e.href})).length>1;return o&&l.push(e),{link_id:n++,anchor:e.textContent||"",url:e.href||"",is_external:e.hostname!==location.hostname,is_nofollow:e.rel.includes("nofollow"),is_new_tab:"_blank"===e.target,is_duplicated:o}})),d=f.length,m=f.length-new Set(f.map((function(t){return t.url}))).size,p=f.filter((function(t){return t.is_new_tab})).length,v=f.filter((function(t){return!t.is_external})).length,y=f.filter((function(t){return t.is_external})).length,w=f.filter((function(t){return t.is_nofollow})).length;return{images:g,links:f,overview:{totalImages:g.length,imageFormatsCount:o,totalImagesWithAlt:r,totalImagesWithoutAlt:c,totalImagesWithTitle:a,totalImagesWithoutTitle:s,totalImagesWithCaption:u,totalImagesWithoutCaption:h,totalUrls:d,totalDuplicatedUrls:m,totalNewTabUrls:p,totalInternalLinks:v,totalExternalLinks:y,totalNoFollowUrls:w}}}();n(c)}else"highlightAnchor"===t.action?(function(t){console.log("highlightAnchor function called with anchorText:",t),r&&(console.log("Clearing previous highlight:",r),r.classList.remove("highlighted"),r=null);var e=i();if(e){var n=e.querySelectorAll("a, span, div, p, h1, h2, h3, h4, h5, h6");console.log("Total elements found in content area:",n.length);var o=!1;n.forEach((function(e){console.log("Checking element:",e,"with text:",e.textContent.trim()),e.textContent.trim()===t.trim()&&(console.log("Match found. Highlighting element:",e),e.classList.add("highlighted"),setTimeout((function(){console.log("Scrolling to element:",e),e.scrollIntoView({behavior:"smooth",block:"center"})}),100),r=e,o=!0)})),o?console.log("Element highlighted:",r):console.log("No matching element found for anchor text:",t)}else console.error("Content area not found.")}(t.anchorText),n({status:"done"})):"scrollToAnchor"===t.action?(s=t.anchorText,document.querySelectorAll("a, span, div, p, h1, h2, h3, h4, h5, h6").forEach((function(t){t.textContent.trim()===s.trim()&&setTimeout((function(){t.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),n({status:"done"})):"scrollToImage"===t.action?(a=t.imageUrl,document.querySelectorAll("img").forEach((function(t){t.src!==a&&t.getAttribute("data-src")!==a||setTimeout((function(){t.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),n({status:"done"})):"highlightAllDuplicates"===t.action?(console.log("Highlighting all duplicate links"),l.forEach((function(t){t.classList.add("highlighted")})),l.length>0&&setTimeout((function(){l[0].scrollIntoView({behavior:"smooth",block:"center"})}),100),n({status:"done"})):"resetHighlights"===t.action?(console.log("Resetting highlights"),document.querySelectorAll(".highlighted").forEach((function(t){t.classList.remove("highlighted")})),r=null,l.length=0,n({status:"done"})):n({error:"Unknown action"})}catch(t){console.error("Error handling request:",t),n({error:t.message})}var a,s;return!0}))})()})();